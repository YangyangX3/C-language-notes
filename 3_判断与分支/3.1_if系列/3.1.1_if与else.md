---
title: if 与 else：做出选择
tags: [C语言, 控制流, 条件语句, if, else, 关系运算符, 流程图, 注释]
---

# 3.1.1 if 与 else：做出选择

程序不仅能执行顺序的计算，还能根据条件做出不同的选择。`if` 和 `else` 语句是实现这种选择的基础。

## `if` 语句：条件满足则执行

`if` 语句用于检查一个条件是否为真 (true)，如果为真，则执行其后的代码块。

-   **基本语法**:
    ```c
    if ( <条件表达式> ) {
        // 条件为真时执行的语句
    }
    ```
    或者，如果只有一条语句：
    ```c
    if ( <条件表达式> )
        // 条件为真时执行的单条语句;
    ```
-   **条件表达式 (Condition Expression)**:
    -   通常是一个**关系运算**表达式，用于比较两个值。
    -   表达式的结果是一个逻辑值：**真 (true)** 或 **假 (false)**。
    -   在C语言中，**非零值被视为真 (true)**，**零被视为假 (false)**。
-    **执行逻辑**:
    1.  计算 `条件表达式` 的值。
    2.  如果结果为**真** (C 语言中任何**非零值**都被视为真)，则执行紧跟在 `if` 后面的**大括号 `{}` 内**的所有语句。
    3.  如果结果为**假** (值为 **0**)，则**跳过**大括号 `{}` 内的所有语句，直接执行 `if` 语句块之后的第一条语句。
*   **关键**: `if` 块和 `else` 块是**互斥**的，每次执行只会进入其中一个。
*   **流程图**:
    ```mermaid
    graph TD
        A[开始] --> B{条件表达式?};
        B -- 真 (非零) --> C[执行 if 语句块];
        B -- 假 (零) --> D[跳过 if 语句块];
        C --> E[if 语句后的下一条语句];
        D --> E;
    ```
-   **示例：找零计算器 (基础版)**
    ```c
    #include <stdio.h>

    int main() {
        int price = 0;
        int change = 0;

        printf("请输入金额（元）：");
        scanf("%d", &price);

        printf("请输入票面（元）：");
        scanf("%d", &change); // 这里用 change 变量暂存票面值

        // 判断票面是否足够支付
        if ( change >= price ) { // 如果票面金额大于等于商品价格
            change = change - price; // 计算找零
            printf("应找您：%d元\n", change);
        }

        // 如果票面不够，if 条件不满足，则不执行找零计算，程序直接结束

        return 0;
    }
    ```

## `else` 语句：条件不满足时执行

当 `if` 的条件不满足时，我们可能希望执行另一段代码。这时可以使用 `else` 语句。

-   **基本语法**:
    ```c
    if ( <条件表达式> ) {
        // 条件为真时执行的语句
    } else {
        // 条件为假时执行的语句
    }
    ```
-   **执行流程**: 如果 `<条件表达式>` 为真，执行 `if` 块；如果为假，执行 `else` 块。两者必居其一。
*   **关键**: `if` 块和 `else` 块是**互斥**的，每次执行只会进入其中一个。
*   **流程图**:
    ```mermaid
    graph TD
        A[开始] --> B{条件表达式?};
        B -- 真 --> C[执行 if 语句块];
        B -- 假 --> D[执行 else 语句块];
        C --> E[if-else 后的下一条语句];
        D --> E;
    ```
-   **示例：找零计算器 (完整版)**
    ```c
    #include <stdio.h>

    int main() {
        // 定义变量 price 表示商品价格，默认为0
        int price = 0;
        // 定义变量 change 表示找零金额
        int change = 0;

        // 提示用户输入商品价格
        printf("请输入金额（元）：");
        // 读取用户输入的整数并存入 price 变量
        scanf("%d", &price);

        // 提示用户输入票面金额
        printf("请输入票面（元）：");
        // 读取用户输入的整数并存入 change 变量（暂存票面）
        scanf("%d", &change);

        // 判断票面金额是否足够
        if ( change >= price ) { // 如果票面大于等于价格
            // 计算应找零钱
            change = change - price;
            // 输出找零金额
            printf("应找您：%d元\n", change);
        } else { // 否则 (票面金额小于价格)
            // 输出提示信息，告知差额
            printf("您的钱不够，还差 %d 元。\n", price - change);
        }

        // 程序正常结束
        return 0;
    }
    ```

## 关系运算符[^1]

用于比较两个值的运算符称为关系运算符。
它们的结果是 `int` 类型，`1` 表示真 (true)，`0` 表示假 (false)。

| 运算符 | 含义         | 示例        | 结果 (假设 a=5, b=3) |
| :----- | :----------- | :---------- | :-------------------- |
| `>`    | 大于         | `a > b`     | `1` (真)              |
| `>=`   | 大于等于     | `a >= b`    | `1` (真)              |
| `<`    | 小于         | `a < b`     | `0` (假)              |
| `<=`   | 小于等于     | `a <= b`    | `0` (假)              |
| `==`   | 等于         | `a == b`    | `0` (假)              |
| `!=`   | 不等于       | `a != b`    | `1` (真)              |

-   **注意 `==` 与 `=` 的区别**: `==` 是**比较**运算符，判断两边是否相等；`=` 是**赋值**运算符，将右边的值赋给左边。在 `if` 条件中误用 `=` 是一个非常常见的错误！
    ```c
    if ( price = 0 ) { // 错误！这是赋值，price 变成 0，条件永远为假
       // ...
    }
    if ( price == 0 ) { // 正确！这是比较
       // ...
    }
    ```

## 代码块与单语句

-   `if` 和 `else` 后面可以跟一个**代码块** `{...}`（包含多条语句）或**单条语句**（末尾有分号）。
-   **推荐**: 即使只有一条语句，也**始终使用大括号[^2] `{}`** 将其括起来。这能提高代码的可读性，并避免在后续修改中引入错误（例如，在单语句 `if` 下添加第二条语句时忘记加括号）。
```C
if (condition)
    statement1;
    statement2;  // 这条语句不受if控制
```

## 注释 (Comments)

-   注释是代码中用于解释说明的部分，**编译器会忽略它们**。
-   **单行注释**: 以 `//` 开始，直到行尾。
    ```c
    // 这是单行注释
    int price = 100; // 初始化价格
    ```
-   **多行注释**: 以 `/*` 开始，以 `*/` 结束，可以跨越多行。
    ```c
    /*
     * 这是多行注释。
     * 可以写很多说明文字。
     */
    ```
-   **作用**: 提高代码可读性，解释复杂逻辑、变量含义或代码目的。

## 常见错误总结

1.  **忘记大括号 `{}`**: 导致只有紧跟 `if` 或 `else` 的第一条语句受条件控制。
2.  **在 `if (条件)` 后误加分号 `;`**: 使 `if` 的逻辑体变为空语句，其后的语句块总会执行。
3.  **混淆 `==` (等于比较) 和 `=` (赋值)**: 导致逻辑错误，应始终使用 `==` 进行相等判断。注意编译器的警告。
4.  **悬挂 `else`**: 在嵌套 `if` 中，省略大括号可能导致 `else` 与错误的 `if` 匹配。
5.  **缩进不规范**: 虽然编译器忽略缩进，但不正确的缩进会严重误导阅读代码的人。

## 流程图 (Flowchart)

流程图是可视化程序执行流程的一种方式。
-   **`if` 语句** 对应一个菱形的判断框，有两条出路（真/假）。
-   **`if-else` 语句** 对应一个判断框，真假两条路径分别连接不同的处理步骤，最后汇合到一起。


![[if 和 if-else 的标准流程图.png]]

[^1]: **关系运算符**的优先级低于**算数**运算符，但高于**赋值运算符**，这意味着关系运算会先于赋值运算执行。

[^2]: 因为**C**语言语句是以分号 `;` 结束，所以使用`{...}`来区分**代码块**
