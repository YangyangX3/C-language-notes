1
00:00:04,639 --> 00:00:06,200
如果已经写好了一个程序

2
00:00:06,200 --> 00:00:07,580
它是通过标准输入

3
00:00:07,580 --> 00:00:08,630
标准输出

4
00:00:08,630 --> 00:00:10,808
也就是说用print pf和scaf

5
00:00:10,808 --> 00:00:12,339
来做所有输出的

6
00:00:12,339 --> 00:00:14,228
我们有一个非常简单的办法

7
00:00:14,228 --> 00:00:17,138
可以把这个程序的输出写到文件里去

8
00:00:17,138 --> 00:00:19,480
可以让这个程序从文件里读

9
00:00:19,919 --> 00:00:21,899
当然unix可以这么做

10
00:00:21,899 --> 00:00:24,509
windows也就是dos也是可以这么做的

11
00:00:24,509 --> 00:00:25,839
我们来看一下怎么做

12
00:00:26,219 --> 00:00:30,329
我们之前看到的这个test交互的情况下

13
00:00:30,329 --> 00:00:32,658
是要你去输入一个数字

14
00:00:32,719 --> 00:00:35,570
然后呢它会读入那个数字输出

15
00:00:35,570 --> 00:00:38,479
还会输出这个scaf和print f

16
00:00:38,479 --> 00:00:39,799
这两个函数的返回值

17
00:00:39,799 --> 00:00:42,189
ok现在如果我们在运行这个test的时候

18
00:00:42,189 --> 00:00:44,109
后面加上一个大于号

19
00:00:44,109 --> 00:00:50,710
然后说比如说我们要到这个一二点out里去

20
00:00:50,710 --> 00:00:52,780
这是一个后面给的是一个文件名啊

21
00:00:52,780 --> 00:00:54,039
然后我们现在运行

22
00:00:54,039 --> 00:00:57,659
它给出12345回车没了

23
00:00:58,520 --> 00:01:00,759
你就看不见它的运行结果了

24
00:01:00,759 --> 00:01:04,060
但是呢如果你打开一二点out文件

25
00:01:04,060 --> 00:01:06,799
你会读到一模一样的内容

26
00:01:07,480 --> 00:01:08,099
同样的

27
00:01:08,099 --> 00:01:09,180
如果你现在说

28
00:01:09,180 --> 00:01:13,769
我把这个12345写到一二点in里头去

29
00:01:13,769 --> 00:01:16,500
然后12345回车

30
00:01:17,359 --> 00:01:19,519
ctrl d把它结束掉

31
00:01:19,519 --> 00:01:21,500
现在如果我们看一下一二点硬的

32
00:01:21,500 --> 00:01:23,030
里面有12345了

33
00:01:23,030 --> 00:01:25,819
如果我们运行这个test的时候

34
00:01:25,819 --> 00:01:29,899
说他是从一二点in做输入的

35
00:01:31,040 --> 00:01:33,430
我们得到了它的那个输出

36
00:01:33,430 --> 00:01:34,900
当然我们也可以说啊

37
00:01:34,900 --> 00:01:37,060
我们要从12.1的做到输入输入

38
00:01:37,060 --> 00:01:39,759
然后呢我们要把输出写到一二点out里头去

39
00:01:40,420 --> 00:01:42,390
输入输出全都是文件了

40
00:01:42,390 --> 00:01:44,640
当然这时候12.2里头也有

41
00:01:44,640 --> 00:01:46,500
我们所期望的那个结果

42
00:01:47,219 --> 00:01:51,950
这是叫做程序运行时候的重定向

43
00:01:51,950 --> 00:01:54,219
我们可以用小于号来指定

44
00:01:54,260 --> 00:01:56,719
用一个文件作为它的输入

45
00:01:56,719 --> 00:01:58,500
用大于号来指定

46
00:01:58,579 --> 00:02:01,299
把他的输出写到另外一个文件里头去

47
00:02:01,760 --> 00:02:03,230
所以通过这样的方式

48
00:02:03,230 --> 00:02:05,180
你很容易就可以做出一个

49
00:02:05,180 --> 00:02:07,760
对文件进行读写的程序来

50
00:02:07,760 --> 00:02:10,550
你只要做这个标准的输入输出

51
00:02:10,550 --> 00:02:12,259
用scaf print就可以了

52
00:02:12,560 --> 00:02:14,659
当然这不是一般的方式

53
00:02:14,659 --> 00:02:18,340
一般的方式呢我们需要做一个file

54
00:02:19,558 --> 00:02:22,218
在s t d l.h这个头文件里面

55
00:02:22,218 --> 00:02:23,899
已经给我们声明好了

56
00:02:23,899 --> 00:02:28,120
这个啊这种类型啊叫做file的新file的指针

57
00:02:28,239 --> 00:02:30,399
所以呢我们需要定义一个flow的变量

58
00:02:30,399 --> 00:02:32,939
然后用fopen函数去打开这个文件

59
00:02:33,079 --> 00:02:34,158
然后打开以后

60
00:02:34,158 --> 00:02:38,879
你用f cf和f print f来做文件的读和写

61
00:02:39,299 --> 00:02:42,299
也就是说我们可以这样子去做这件事情

62
00:02:42,299 --> 00:02:45,629
我们用我们做一个fil的指针

63
00:02:45,629 --> 00:02:47,219
fp这是一个变量

64
00:02:47,219 --> 00:02:49,319
这个变量用来指向一个f

65
00:02:49,800 --> 00:02:51,319
其实它是一个结构啊

66
00:02:51,319 --> 00:02:52,069
它是一个结构

67
00:02:52,069 --> 00:02:54,169
这个结构里头呢会呃

68
00:02:54,169 --> 00:02:57,150
代表着我们所打开的文件的一些信息

69
00:02:57,150 --> 00:03:00,030
当然我们并不需要去了解这个呃法

70
00:03:00,030 --> 00:03:01,050
结构里面到底有什么啊

71
00:03:01,050 --> 00:03:01,590
我们只要知道

72
00:03:01,590 --> 00:03:03,719
我们有以这种方式去用它就可以了

73
00:03:03,719 --> 00:03:08,400
我们这个fp呢一定是由fopen函数open嘛

74
00:03:08,400 --> 00:03:09,120
打开是吧

75
00:03:09,120 --> 00:03:10,530
前面有个f表示是文件

76
00:03:10,530 --> 00:03:12,879
打开文件这个函数去打开一个文件

77
00:03:12,879 --> 00:03:13,840
我们要给它两个参数

78
00:03:13,840 --> 00:03:14,620
第一个是文件名

79
00:03:14,620 --> 00:03:16,629
第二个呢我们用r表示

80
00:03:16,629 --> 00:03:18,879
我们要去打开那个文件来读

81
00:03:18,919 --> 00:03:22,360
然后这个函数的返回值

82
00:03:22,439 --> 00:03:25,469
如果你它没有打开那个文件

83
00:03:25,469 --> 00:03:27,800
它会返回一个闹

84
00:03:28,280 --> 00:03:29,990
因此标准的结构呢

85
00:03:29,990 --> 00:03:32,479
我们就要去判断一下这个f p是不是闹

86
00:03:32,479 --> 00:03:33,379
如果不是闹

87
00:03:33,379 --> 00:03:34,759
我们去做下面的事情

88
00:03:34,759 --> 00:03:37,409
最后要f close去把它给关掉

89
00:03:37,409 --> 00:03:38,490
如果是闹

90
00:03:38,490 --> 00:03:40,080
那我们可能要告诉人家

91
00:03:40,080 --> 00:03:41,520
这个文件无法打开

92
00:03:41,520 --> 00:03:44,280
我们来试一个这样的程序啊

93
00:03:44,280 --> 00:03:45,539
我们现在这个程序做的事情呢

94
00:03:45,539 --> 00:03:49,840
就是我们用f open去打开12点in这个文件

95
00:03:49,840 --> 00:03:51,430
我们刚刚做过这个事情对吧

96
00:03:51,430 --> 00:03:53,810
然后呢如果打开了

97
00:03:53,810 --> 00:03:57,129
那么我们用f gf去读那个文件

98
00:03:57,129 --> 00:03:59,650
f caf和cf长得几乎一模一样

99
00:03:59,650 --> 00:04:00,849
就前面多了个f

100
00:04:00,849 --> 00:04:04,719
然后呢它的参数呢第一项是那个fl型

101
00:04:04,719 --> 00:04:08,419
是那个指向代表文件的那个结构的指针啊

102
00:04:08,419 --> 00:04:10,580
然后呢后面的东西就跟原来的呃

103
00:04:10,580 --> 00:04:11,750
scaf是一模一样的

104
00:04:11,750 --> 00:04:13,039
读到那个整数以后

105
00:04:13,039 --> 00:04:13,759
我们就输出它

106
00:04:13,759 --> 00:04:15,099
然后我们就把它关掉了

107
00:04:15,379 --> 00:04:18,259
那如果打开文件的时候打不开

108
00:04:18,259 --> 00:04:19,819
那我们就会说无法打开文件

109
00:04:19,819 --> 00:04:21,360
我们来试一下这个程序

110
00:04:21,459 --> 00:04:23,499
那我们还是把它叫做test啊

111
00:04:23,499 --> 00:04:26,000
然后呢我们就运行它

112
00:04:26,098 --> 00:04:28,439
因为我们现在有一二点in在那了是吧

113
00:04:28,439 --> 00:04:30,449
然后呢我们就得到了这个12345

114
00:04:30,449 --> 00:04:33,238
假如说我们把一二点in给删了

115
00:04:33,238 --> 00:04:34,228
现在没有了

116
00:04:34,228 --> 00:04:35,430
我们在运行它

117
00:04:35,430 --> 00:04:37,829
他会说出那句无法打开文件

118
00:04:37,829 --> 00:04:40,379
因为这个时候f open返回了一个now

119
00:04:40,379 --> 00:04:42,720
那么这个f open呢有两个参数

120
00:04:42,720 --> 00:04:43,920
第一个参数是文件名

121
00:04:43,920 --> 00:04:44,819
它是一个字符串

122
00:04:44,819 --> 00:04:46,470
第二个参数呢也是一个字符串

123
00:04:46,470 --> 00:04:48,810
这个字符串里面呢你可以放一些东西

124
00:04:48,810 --> 00:04:50,189
我们刚才看到的是r

125
00:04:50,189 --> 00:04:52,579
这是打开那个文件用来读

126
00:04:52,579 --> 00:04:54,379
如果是w呢

127
00:04:54,379 --> 00:04:56,370
是打开那个文件用来写

128
00:04:56,370 --> 00:04:58,170
并且如果那个文件不存在呢

129
00:04:58,170 --> 00:04:59,509
我们会新建一个文件

130
00:04:59,509 --> 00:05:01,189
如果那个文件已经存在呢

131
00:05:01,189 --> 00:05:03,110
会把那个文件原来的内容全部删光

132
00:05:03,110 --> 00:05:04,069
山空啊

133
00:05:04,069 --> 00:05:04,790
全部清空

134
00:05:04,790 --> 00:05:06,889
那个文件里面所有的原来所有东西都没有

135
00:05:06,889 --> 00:05:08,259
我们从头开始写

136
00:05:08,500 --> 00:05:10,420
而家呢比较复杂

137
00:05:10,420 --> 00:05:13,519
是说我们要打开这个文件呢来读

138
00:05:13,860 --> 00:05:15,420
也可以来写

139
00:05:15,420 --> 00:05:16,889
打开文件以后呢

140
00:05:16,889 --> 00:05:19,860
我们从这个文件的头开始去读

141
00:05:19,860 --> 00:05:21,180
但是如果你要写呢

142
00:05:21,180 --> 00:05:22,810
也是从我们这的头开始写

143
00:05:22,810 --> 00:05:24,430
而w加的意思呢

144
00:05:24,430 --> 00:05:27,899
我们要打开这个文件来读来写啊

145
00:05:27,899 --> 00:05:29,189
准确的说来写

146
00:05:29,189 --> 00:05:30,149
并且可以读

147
00:05:30,149 --> 00:05:31,680
那么它和w一样

148
00:05:31,680 --> 00:05:32,759
如果不存在就新建

149
00:05:32,759 --> 00:05:34,658
如果存在的则清空

150
00:05:34,658 --> 00:05:36,999
所以w加的时候

151
00:05:36,999 --> 00:05:39,550
其实一开始是没东西可读的

152
00:05:39,550 --> 00:05:42,980
可是呢它可以读出你写进去的那些东西啊

153
00:05:43,060 --> 00:05:46,180
而r加呢一般我们用来做修改对吧

154
00:05:46,180 --> 00:05:47,199
打开以后呢

155
00:05:47,199 --> 00:05:48,220
从文件头开始

156
00:05:48,220 --> 00:05:49,180
你可以读东西

157
00:05:49,180 --> 00:05:51,189
也可以在中间往里面写动

158
00:05:51,189 --> 00:05:52,559
写一些东西进去

159
00:05:52,559 --> 00:05:53,699
a的意思呢

160
00:05:53,699 --> 00:05:56,158
我是要打开来做追加啊

161
00:05:56,158 --> 00:05:57,478
如果不存在

162
00:05:57,478 --> 00:05:58,139
我就新建

163
00:05:58,139 --> 00:05:59,069
如果存在呢

164
00:05:59,069 --> 00:06:01,050
我不把原来的东西

165
00:06:01,050 --> 00:06:03,029
已经有的文件给它删空了

166
00:06:03,029 --> 00:06:05,800
而是从原来的文件的末尾开始加进去

167
00:06:05,800 --> 00:06:07,779
另外在这些符号的后面

168
00:06:07,779 --> 00:06:09,740
你还可以加个x啊

169
00:06:09,740 --> 00:06:12,620
呃这主要指的是w和a这个x的话呢

170
00:06:12,620 --> 00:06:14,300
就是我指新建

171
00:06:14,300 --> 00:06:16,220
如果文件已经存在

172
00:06:16,220 --> 00:06:17,629
那我就不能打开它

173
00:06:17,629 --> 00:06:20,939
这样的话呢可以避免对已有的文件做破坏

174
00:06:20,939 --> 00:06:21,300
对吧

175
00:06:21,300 --> 00:06:22,079
如果你没有文件

176
00:06:22,079 --> 00:06:23,040
我可以帮你新建

177
00:06:23,040 --> 00:06:24,360
但是呢你如果有了

178
00:06:24,360 --> 00:06:25,800
我就不会去见他啊

