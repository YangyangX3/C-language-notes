---
title: 链表的删除
tags:
  - C语言
  - 链表
  - 数据结构
  - 删除操作
related_code:
  - "[[链表.c]]"
---

# 链表的删除

## 链表删除操作的原理

链表的删除操作是指从链表中移除特定节点，并保持链表结构的完整性。删除操作的核心是调整指针，使被删除节点的前驱节点直接指向其后继节点，然后释放被删除节点的内存。

## 删除操作的实现

### 基本删除函数

```c
void deleteNode(List *list, int number)
{
    Node *q = NULL;       // 前驱节点
    Node *p = list->head; // 当前节点

    while (p != NULL)
    { // 遍历链表直到末尾
        if (p->value == number)
        {
            if (q != NULL)
            { // 非头节点
                q->next = p->next;
            }
            else
            { // 头节点
                list->head = p->next;
            }
            free(p); // 释放内存
            return;  // 删除成功后返回
        }
        q = p;       // 更新前驱节点
        p = p->next; // 移动到下一个节点
    }
}
```

### 删除操作的关键步骤

1. **查找目标节点**：遍历链表找到要删除的节点
2. **调整指针**：修改前驱节点的指针，跳过要删除的节点
3. **特殊情况处理**：区分删除头节点和非头节点的情况
4. **释放内存**：释放被删除节点占用的内存

## 删除操作的特殊情况

### 1. 删除头节点

当删除的是链表的第一个节点时，需要更新头指针：

```c
if (q == NULL) { // 删除的是头节点
    list->head = p->next;
}
```

### 2. 删除尾节点

当删除的是链表的最后一个节点时，需要更新尾指针（如果有）：

```c
if (p->next == NULL) { // 删除的是尾节点
    list->tail = q;
}
```

### 3. 删除唯一节点

当链表只有一个节点且被删除时，头尾指针都需要置为NULL：

```c
if (q == NULL && p->next == NULL) { // 唯一节点
    list->head = list->tail = NULL;
}
```

## 完整的删除函数

考虑了所有特殊情况的完整删除函数：

```c
void deleteNodeComplete(List *list, int number)
{
    Node *q = NULL;       // 前驱节点
    Node *p = list->head; // 当前节点

    while (p != NULL)
    {
        if (p->value == number)
        {
            // 调整前驱节点的指针
            if (q != NULL) {
                q->next = p->next;
            } else {
                list->head = p->next;
            }
            
            // 如果删除的是尾节点，更新尾指针
            if (p == list->tail) {
                list->tail = q;
            }
            
            // 释放内存
            free(p);
            return;
        }
        q = p;
        p = p->next;
    }
}
```

## 删除操作的性能分析

链表删除操作的性能特点：

1. **查找节点**：O(n) 时间复杂度，需要从头遍历
2. **删除操作本身**：O(1) 时间复杂度，只需调整指针
3. **总体时间复杂度**：O(n)，主要受限于查找过程
4. **空间复杂度**：O(1)，只需要常数额外空间

## 删除操作的优化

可以通过以下方式优化删除操作：

1. **维护索引**：对于频繁访问的节点，可以维护额外的索引结构
2. **双向链表**：使用双向链表可以更高效地删除已知位置的节点
3. **哈希表辅助**：对于频繁查找和删除的场景，可以使用哈希表辅助定位节点

## 相关源代码

完整代码示例请参考：
[[../Assets/源代码/链表.c]] 