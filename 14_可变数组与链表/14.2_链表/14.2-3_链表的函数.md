---
title: 链表的函数
tags:
  - C语言
  - 链表
  - 数据结构
  - 函数实现
related_code:
  - "[[链表.c]]"
---

# 链表的函数

## 链表操作的核心函数

链表作为一种动态数据结构，需要通过函数来实现其基本操作。常见的链表操作函数包括：

1. **创建节点**：分配内存并初始化节点
2. **添加节点**：将新节点添加到链表中
3. **遍历链表**：访问链表中的每个节点
4. **查找节点**：在链表中查找特定值
5. **删除节点**：从链表中移除节点

## 添加节点函数

向链表尾部添加新节点是最基本的操作之一：

```c
void add(List *plist, int number)
{
    // 1. 创建新节点
    Node *p = (Node *)malloc(sizeof(Node));
    if (!p) {
        fprintf(stderr, "Memory allocation failed\n");
        exit(EXIT_FAILURE);
    }
    
    // 2. 初始化新节点
    p->value = number;
    p->next = NULL;
    
    // 3. 将新节点添加到链表
    if (plist->tail) {
        // 如果链表不为空，在尾部添加
        plist->tail->next = p;
        plist->tail = p;
    } else {
        // 如果链表为空，设置头尾指针
        plist->head = plist->tail = p;
    }
}
```

### 添加节点的关键步骤

1. **分配内存**：使用`malloc`为新节点分配内存
2. **初始化数据**：设置节点的值和指针
3. **连接到链表**：根据链表是否为空，采取不同的连接策略
4. **更新尾指针**：确保尾指针始终指向最后一个节点

### 使用尾指针的优势

在上面的实现中，我们使用了尾指针（`tail`）来优化添加操作：

- 无需遍历链表即可在尾部添加节点
- 时间复杂度从O(n)降低到O(1)
- 对于频繁的尾部添加操作，性能提升显著

## 遍历链表函数

遍历是许多链表操作的基础，典型实现如下：

```c
void print(List *pList)
{
    Node *last;
    for (last = pList->head; last; last = last->next)
    {
        printf("%d ", last->value);
    }
}
```

### 遍历的关键点

1. **起点**：从头指针开始
2. **终止条件**：当指针为NULL时停止
3. **移动**：每次处理完当前节点后，移动到下一个节点

这种遍历模式是链表操作的通用模板，可以根据需要修改处理逻辑。

## 链表操作的内存管理

链表操作中的内存管理非常重要：

1. **内存分配**：每个新节点都需要动态分配内存
2. **错误检查**：必须检查`malloc`的返回值，确保内存分配成功
3. **内存释放**：不再需要的节点应当及时释放，避免内存泄漏

```c
// 内存分配与错误检查示例
Node *p = (Node *)malloc(sizeof(Node));
if (!p) {
    // 处理内存分配失败
    fprintf(stderr, "Memory allocation failed\n");
    exit(EXIT_FAILURE);
}
```

## 相关源代码

完整代码示例请参考：
[[../Assets/源代码/链表.c]] 