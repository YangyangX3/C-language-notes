---
title: 算术运算与表达式
tags:
  - C语言
  - 表达式
  - 运算符
  - 算术运算符
  - 加法
  - 减法
  - 乘法
  - 除法
  - 取余
  - 整数运算
  - 浮点运算
related_code: "[[变量和表达式.c]]"
---

# 2.2.1 算术运算与表达式

程序的主要任务之一就是进行计算。C语言提供了丰富的运算符来执行各种计算。

## 表达式 (Expression)

-   **定义**: 由运算符 (Operator) 和算子 (Operand，也叫操作数) 组成的、用于计算一个值的式子。
-   **示例**:
    ```c
    amount = price + 100; // 整个是一个赋值表达式
    price + 100           // 加法表达式
    100                   // 常数本身也是最简单的表达式
    price                 // 变量本身也是表达式
    100 - price           // 减法表达式
    count++               // 自增表达式 (后面介绍)
    ```
-   **组成**:
    -   **运算符 (Operator)**: 表示要执行的操作，如 `+`, `-`, `*`, `/`, `%`, `=` 等。
    -   **算子 (Operand)**: 参与运算的数据，可以是常量、变量，甚至可以是其他表达式的结果。
        -   在 `a = b + 5;` 中：
            -   `a`, `b`, `5` 是算子。
            -   `=`, `+` 是运算符。

## 基本算术运算符

C语言支持常见的算术运算：

| 运算符 | 含义     | 示例      | 结果 (假设 a=10, b=3) |
| :-- | :----- | :------ | :---------------- |
| `+` | 加法     | `a + b` | `13`              |
| `-` | 减法     | `a - b` | `7`               |
| `*` | 乘法     | `a * b` | `30`              |
| `/` | 除法     | `a / b` | `3` (整数除法截断)      |
| `%` | 取余(取模) | `a % b` | `1` (10 除以 3 的余数) |

-   **整数除法 `/`**:
    -   如果运算符 `/` 两边的算子都是整数，则执行整数除法。
    -   结果只保留商的整数部分，小数部分被**截断**（不是四舍五入）。
    -   示例: `10 / 3` 结果是 `3`，`5 / 2` 结果是 `2`，`2 / 3` 结果是 `0`。
    -   **注意**: 除数不能为 0，否则会导致运行时错误。
-   **浮点数除法 `/`**:
    -   如果运算符 `/` 两边至少有一个算子是浮点数（`float` 或 `double`），则执行浮点数除法。
    -   结果会保留小数部分。
    -   示例: `10.0 / 3` 结果是 `3.333...`，`10 / 3.0` 结果是 `3.333...`，`5.0 / 2.0` 结果是 `2.5`。
    -   需要将结果存储在浮点类型的变量中 (`float` 或 `double`)，并使用 `%f` 或 `%lf` 输出。
    ```c
    double result = 10.0 / 3;
    printf("%f\n", result); // 输出 3.333333
    ```
-   **取余运算符 `%` (Modulo)**:
    -   计算左边算子除以右边算子的**余数**。
    -   **要求**: `%` 两边的算子**必须是整数**。不能用于浮点数。
    -   示例: `10 % 3` 结果是 `1`，`5 % 2` 结果是 `1`，`6 % 3` 结果是 `0`。
    -   **应用**:
        -   判断奇偶性: `num % 2 == 0` (偶数)，`num % 2 != 0` (奇数)。
        -   限制范围: `num % N` 的结果总是在 `0` 到 `N-1` 之间（如果`num`非负）。
        -   数字分解: 获取一个整数的个位数 `num % 10`。
        -   时间换算: 将总分钟数转换为小时和分钟。

## 示例：计算时间差

假设我们需要计算两个时间点（如 h1:m1 和 h2:m2）之间相差多少小时多少分钟。

```c
#include <stdio.h>

int main() {
    int hour1, minute1;
    int hour2, minute2;

    printf("请输入第一个时间 (小时 分钟): ");
    scanf("%d %d", &hour1, &minute1);
    printf("请输入第二个时间 (小时 分钟): ");
    scanf("%d %d", &hour2, &minute2);

    // 将两个时间都转换为从零点开始的总分钟数
    int t1 = hour1 * 60 + minute1;
    int t2 = hour2 * 60 + minute2;

    // 计算时间差（以分钟为单位）
    int diff_minutes = t2 - t1;

    // 将时间差转换回小时和分钟
    int diff_hour = diff_minutes / 60;  // 整数除法得到小时部分
    int diff_minute_part = diff_minutes % 60; // 取余得到分钟部分

    printf("时间差为: %d 小时 %d 分钟\n", diff_hour, diff_minute_part);

    return 0;
}
```

**代码解析**:

1.  **输入**: 定义四个 `int` 变量存储两个时间的小时和分钟，使用 `scanf` 读取。
2.  **统一单位**: 将每个时间点都转换为从零点开始计算的总分钟数 (`t1`, `t2`)。这样便于直接进行减法运算，避免处理跨小时的借位问题。
    -   `hour1 * 60 + minute1`
3.  **计算差值**: 计算两个总分钟数的差值 `diff_minutes`。
4.  **转换回小时和分钟**:
    -   使用整数除法 `diff_minutes / 60` 得到相差的小时数 `diff_hour`。
    -   使用取余运算 `diff_minutes % 60` 得到不足一小时的剩余分钟数 `diff_minute_part`。
5.  **输出**: 使用 `printf` 输出结果。

这个例子展示了如何综合运用变量定义、输入、算术运算（`*`, `+`, `-`, `/`, `%`）来解决实际问题，特别是如何通过统一单位和利用整数除法、取余运算来处理非十进制的换算（如时间）。 