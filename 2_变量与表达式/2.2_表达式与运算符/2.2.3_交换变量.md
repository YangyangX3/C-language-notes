---
title: 交换变量
tags: [C语言, 变量, 赋值, 算法, 调试, DevC++]
---

# 2.2.3 交换变量

一个常见的基础编程任务是交换两个变量的值。例如，变量 `a` 存储了 5，变量 `b` 存储了 6，我们希望执行操作后，`a` 变为 6，`b` 变为 5。

## 错误的尝试

初学者可能会尝试直接赋值：

```c
// 错误的代码
a = b; // a 现在是 6，但 a 原来的值 5 丢失了！
b = a; // b 现在等于 a 的新值 6，而不是 a 原来的值 5
```

**问题分析**:

-   程序是按顺序执行的。当执行 `a = b;` 时，`a` 的原始值（5）被 `b` 的值（6）覆盖并丢失了。
-   随后执行 `b = a;` 时，是将 `a` 当前的值（已经是 6）赋给 `b`。
-   结果是 `a` 和 `b` 都变成了 6，没有实现交换。

## 正确的方法：使用临时变量

正确的做法是引入第三个**临时变量**（Temporary Variable），就像交换两杯水需要一个空杯子一样。

**步骤**:

1.  将第一个变量（如 `a`）的值**备份**到临时变量 `t` 中。
2.  将第二个变量（如 `b`）的值赋给第一个变量 `a`。此时 `a` 的原值已备份，可以安全覆盖。
3.  将临时变量 `t` 中备份的原 `a` 的值赋给第二个变量 `b`。

**代码实现**:

```c
#include <stdio.h>

int main() {
    int a = 5;
    int b = 6;
    int t; // 定义一个临时变量 t，无需立即初始化

    printf("交换前: a = %d, b = %d\n", a, b);

    // 交换步骤
    t = a;  // 1. 备份 a 的值到 t (t 现在是 5)
    a = b;  // 2. 将 b 的值赋给 a (a 现在是 6)
    b = t;  // 3. 将备份在 t 中的原 a 的值赋给 b (b 现在是 5)

    printf("交换后: a = %d, b = %d\n", a, b);

    return 0;
}
```

**输出**:
```
交换前: a = 5, b = 6
交换后: a = 6, b = 5
```

这是一个非常经典和基础的**算法模式**或**编程套路 (Pattern)**。学习编程不仅仅是学习语法规则，更要学习这些解决常见问题的固定方法和思想。

## 使用调试器观察过程 (以 Dev-C++ 为例)

调试器 (Debugger) 是一个强大的工具，可以让我们**单步执行**程序，观察每一步执行后变量值的变化，从而理解程序的运行流程和发现错误。

**基本步骤 (Dev-C++)**:

1.  **设置断点 (Breakpoint)**:
    -   在你希望程序暂停执行的那一行代码的行号旁边（灰色区域）点击鼠标左键。该行会变红，并出现一个标记，表示设置了断点。
    -   例如，可以在 `t = a;` 这一行设置断点。
2.  **开始调试**:
    -   点击菜单栏 "运行" -> "调试" (快捷键 F5)，或者工具栏上的调试按钮。
    -   **注意**: 首次调试可能需要确认是否生成调试信息，选择 "Yes"。
3.  **程序暂停**: 程序会开始运行，并在你设置的第一个断点处暂停。暂停行的代码会高亮（通常是蓝色），表示**即将执行**这一行。
4.  **观察变量**:
    -   将鼠标悬停在代码中的变量名（如 `a`, `b`, `t`）上，通常会弹出一个小窗口显示该变量的当前值。
    -   也可以打开调试窗口（菜单栏 "查看" -> "调试" 或按 Ctrl+Alt+D），在 "查看/改变变量" (Watches) 标签页中添加你想监控的变量。
    -   注意：未初始化的变量（如 `t` 在执行 `t=a;` 之前）会显示一个随机的垃圾值。
5.  **单步执行**:
    -   在调试工具栏或调试菜单中找到 "下一步" (Step Over，通常快捷键是 F8 或 F7)。
    -   每按一次 "下一步"，程序会执行当前高亮行，并暂停在下一行。
    -   观察每次执行后变量值的变化。
    -   例如，执行完 `t = a;` 后，观察到 `t` 的值变成了 `a` 的初始值 (5)。
    -   执行完 `a = b;` 后，观察到 `a` 的值变成了 `b` 的初始值 (6)。
    -   执行完 `b = t;` 后，观察到 `b` 的值变成了 `t` 的值 (5)，完成交换。
6.  **继续运行或停止**:
    -   可以使用 "继续" (Continue，快捷键 F9) 让程序运行到下一个断点或结束。
    -   可以点击停止按钮结束调试。

通过调试器，我们可以清晰地看到交换变量的三步操作以及每一步对变量值的影响，加深对算法和程序执行流程的理解。 